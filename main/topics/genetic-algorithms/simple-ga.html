

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Implementing a Genetic Algorithm &mdash; CSCI 340 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=fa70396c" />

  
    <link rel="shortcut icon" href="../../_static/duck_face.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3. Experimenting with a Genetic Algorithm" href="simple-ga-experiment.html" />
    <link rel="prev" title="1. Introduction" href="../intro/intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            CSCI 340
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Course Notes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Implementing a Genetic Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problem">2.1. Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialization">2.2. Initialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#representation">2.2.1. Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#population">2.2.2. Population</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation">2.3. Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selection">2.4. Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variation-operators">2.5. Variation Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#crossover">2.5.1. Crossover</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#potential-problem">2.5.1.1. Potential Problem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mutation">2.5.2. Mutation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#termination-requirement">2.6. Termination Requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="#for-next-class">2.7. For Next Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="simple-ga-experiment.html">3. Experimenting with a Genetic Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/problems.html">4. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../origin/origin.html">5. Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">6. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../representation/representation.html">7. Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="n-queens-ga.html">8. <span class="math notranslate nohighlight">\(n\)</span> Queens Genetic Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="n-queens-ga-experiment.html">9. Experimenting with the <span class="math notranslate nohighlight">\(n\)</span> Queens Genetic Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genetic-operators/genetic-operators.html">10. Genetic Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selection/selection.html">11. Selection and Population Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genetic-programming/genetic-programming.html">12. Genetic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genetic-programming/symbolic-regression-gp.html">13. Symbolic Regression with Genetic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genetic-programming/symbolic-regression-gp-experiment.html">14. Experimenting with Symbolic Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters/tuning.html">15. Tuning Hyperparameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters/comparing.html">16. What Comparing Distributions <em>Means</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/multi-objective.html">17. Multi-Objective Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../particle-swarm-optimization/pso.html">18. Particle Swarm Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../particle-swarm-optimization/simple-pso.html">19. Implementing PSO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Student Lectures</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../student-lectures/description.html">1. Student Lecture Task Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../student-lectures/Ant%20Colony%20Optimization/Ant%20Colony%20Optimization.html">2. Ant Colony Optimization (ACO)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Student Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../student-projects/description.html">1. Project Description</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Assignments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../assignments/tsp/tsp.html">1. Travelling Salesperson Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../assignments/gp/gp.html">2. Genetic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../assignments/pso/pso.html">3. Particle Swarm Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Outline</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../outline/outline.html">Computer Science 340 — Evolutionary Computation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CSCI 340</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>Implementing a Genetic Algorithm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/topics/genetic-algorithms/simple-ga.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="implementing-a-genetic-algorithm">
<h1><span class="section-number">2. </span>Implementing a Genetic Algorithm<a class="headerlink" href="#implementing-a-genetic-algorithm" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p>The purpose of this topic is to see a simple genetic algorithm (GA)</p></li>
<li><p>Although simple, it includes all the necessary parts to make it a complete GA</p></li>
<li><p>Despite never seeing a GA before, or knowing the intuition behind the underlying ideas, the topic should be manageable</p></li>
</ul>
<section id="problem">
<h2><span class="section-number">2.1. </span>Problem<a class="headerlink" href="#problem" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The problem being <em>solved</em> is deliberately kept very simple. This is because (a) the purpose of this topic is to
see a working GA, not solve a complex problem, and (b) well understood problems are often much simpler to reason
about. Knowing what a good/bad solution is, and having an idea of why certain solving strategies work or not, will
help with building the intuition around how GAs work.</p>
</div>
<ul>
<li><p>The problem being solved is to maximize the integer value of an unsigned binary number</p>
<blockquote>
<div><ul class="simple">
<li><p>Find the largest binary number representable with <span class="math notranslate nohighlight">\(n\)</span> bits</p></li>
</ul>
</div></blockquote>
</li>
<li><p>For this problem, the <strong>search space</strong> is all possible unsigned binary numbers of length <span class="math notranslate nohighlight">\(n\)</span></p></li>
<li><p>Given this problem description, the best solution is obviously a string of <span class="math notranslate nohighlight">\(n\)</span> ones</p></li>
<li><p>Consider an example with <span class="math notranslate nohighlight">\(n=10\)</span>, how would these candidate solutions be ranked in terms of <em>goodness</em>?</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(1111111111\)</span> (1023)</p></li>
<li><p><span class="math notranslate nohighlight">\(1011001001\)</span> (713)</p></li>
<li><p><span class="math notranslate nohighlight">\(0001111111\)</span> (127)</p></li>
<li><p><span class="math notranslate nohighlight">\(0000000000\)</span> (0)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Thus, the GA being written will <em>evolve</em> bit strings to maximize the integer value of an unsigned binary number</p></li>
<li><p>Realistically, one would not use a GA to solve such a problem</p>
<blockquote>
<div><ul class="simple">
<li><p>GAs are typically used for very challenging problems with no other effective means of solving</p></li>
</ul>
</div></blockquote>
</li>
<li><p>However, this problem provides an opportunity to consider how the GA can and must work to find the best solution</p></li>
</ul>
</section>
<section id="initialization">
<h2><span class="section-number">2.2. </span>Initialization<a class="headerlink" href="#initialization" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Before evolution can begin, an initial <strong>population</strong> of <strong>candidate solutions</strong> needs to be created</p></li>
<li><p>A single candidate solution is a potential solution to the problem being solved</p></li>
<li><p>For example, <span class="math notranslate nohighlight">\(1011001001\)</span> is a valid candidate solution for finding the largest binary value where <span class="math notranslate nohighlight">\(n=10\)</span></p></li>
</ul>
<section id="representation">
<h3><span class="section-number">2.2.1. </span>Representation<a class="headerlink" href="#representation" title="Link to this heading"></a></h3>
<ul>
<li><p>It is sometimes non-trivial to determine how a candidate solution should be represented, or encoded, in the program</p>
<blockquote>
<div><ul class="simple">
<li><p>An encoded candidate solution is called a <strong>chromosome</strong></p></li>
</ul>
</div></blockquote>
</li>
<li><p>For the integer maximization of an unsigned binary number, there are some obvious reasonable and simple encodings</p></li>
<li><p>Here, a list of <code class="docutils literal notranslate"><span class="pre">0</span></code>s and <code class="docutils literal notranslate"><span class="pre">1</span></code>s will be used</p></li>
<li><p>Thus, the candidate solution <span class="math notranslate nohighlight">\(1011001001\)</span> can be encoded as the chromosome <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1]</span></code></p></li>
<li><p>A single chromosome can be created by generating random lists of <code class="docutils literal notranslate"><span class="pre">0</span></code>s and <code class="docutils literal notranslate"><span class="pre">1</span></code>s of some predetermined length</p>
<blockquote>
<div><ul class="simple">
<li><p>For the example used here, the length was <span class="math notranslate nohighlight">\(n=10\)</span></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="population">
<h3><span class="section-number">2.2.2. </span>Population<a class="headerlink" href="#population" title="Link to this heading"></a></h3>
<ul>
<li><p>A <strong>population</strong> is a collection of candidate solutions</p></li>
<li><p>A population can be created by creating a list of randomly generated chromosomes</p></li>
<li><p>In this example, a single chromosome is a list of <code class="docutils literal notranslate"><span class="pre">0</span></code>s and <code class="docutils literal notranslate"><span class="pre">1</span></code>s</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1]</span></code></p>
</div></blockquote>
</li>
<li><p>A population is a list of chromosomes</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[1, 0, 1, 1, 0, 0, 1, 0, 0, 1],
 [0, 0, 0, 1, 1, 0, 1, 0, 0, 0],
 [1, 0, 0, 0, 0, 0, 1, 0, 0, 0],
 ...
 ...
 [0, 1, 1, 1, 1, 0, 0, 0, 0, 1]]
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Each chromosome is randomly generated</p></li>
<li><p>Below is an example of how one could create a population for this problem</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">61</span>    <span class="n">population</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">62</span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">):</span>
<span class="linenos">63</span>        <span class="n">chromosome</span> <span class="o">=</span> <span class="n">choices</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">BIT_STRING_LENGTH</span><span class="p">)</span>
<span class="linenos">64</span>        <span class="n">population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The number of chromosomes within the population is defined by a hyperparameter called <code class="docutils literal notranslate"><span class="pre">POPULATION_SIZE</span></code></p></li>
<li><p>The number of bits in the binary number (<span class="math notranslate nohighlight">\(n\)</span>) is called <code class="docutils literal notranslate"><span class="pre">BIT_STRING_LENGTH</span></code></p></li>
</ul>
</section>
</section>
<section id="evaluation">
<h2><span class="section-number">2.3. </span>Evaluation<a class="headerlink" href="#evaluation" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>After generating the population, the candidate solutions are often not particularly <em>good</em></p></li>
<li><p>However, some will likely be better than others</p></li>
<li><p>Regardless, a mechanism for evaluating the quality, or <strong>fitness</strong>, of candidate solutions is needed</p></li>
<li><p>This mechanism is called the <strong>fitness function</strong></p></li>
<li><p>Below is an example fitness function for this problem</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">26</span><span class="k">def</span> <span class="nf">value_fitness</span><span class="p">(</span><span class="n">chromosome</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos">27</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">28</span><span class="sd">    Calculate the decimal value of the chromosome (bitstring).</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="sd">    :param chromosome: Chromosome (bitstring) to evaluate</span>
<span class="linenos">31</span><span class="sd">    :return: The decimal value of the chromosome (bitstring)</span>
<span class="linenos">32</span><span class="sd">    :raises ValueError: If the chromosome is empty</span>
<span class="linenos">33</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">34</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">35</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Empty chromosome cannot be evaluated: </span><span class="si">{</span><span class="n">chromosome</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">36</span>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span> <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">chromosome</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>With this fitness function, the fitness of each candidate solution within the population can be calculated and stored</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">70</span>        <span class="n">population_fitness</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">71</span>        <span class="k">for</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
<span class="linenos">72</span>            <span class="n">fitness</span> <span class="o">=</span> <span class="n">value_fitness</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
<span class="linenos">73</span>            <span class="n">population_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="selection">
<h2><span class="section-number">2.4. </span>Selection<a class="headerlink" href="#selection" title="Link to this heading"></a></h2>
<ul>
<li><p>Ideally, more fit candidate solutions should be <em>more likely</em> to persist within the population</p>
<blockquote>
<div><ul class="simple">
<li><p>And less fit candidate solutions should be more likely to die off</p></li>
</ul>
</div></blockquote>
</li>
<li><p>However, it is not as simple as always selecting the best candidate solutions</p>
<blockquote>
<div><ul class="simple">
<li><p>Doing so would cause the population to <strong>converge</strong> too early</p></li>
<li><p>This can result in finding sub-optimal solutions</p></li>
</ul>
</div></blockquote>
</li>
<li><p>This is where it becomes important to think about the population, not individual candidate solutions</p></li>
<li><p>The fitness function is a metric for the ultimate goal — finding a <em>candidate solution</em> that best solves the problem</p></li>
<li><p>But focusing on this metric is detrimental to the <em>population</em></p></li>
<li><p>Instead, the population should also emphasize <strong>diversity</strong></p></li>
<li><p>This can be done in any way someone wants</p>
<blockquote>
<div><ul class="simple">
<li><p>There are no hard rules on how selection is to be done</p></li>
</ul>
</div></blockquote>
</li>
<li><p>A simple and popular selection technique is <code class="docutils literal notranslate"><span class="pre">tournament_selection</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Randomly select a subset of chromosomes within the population</p></li>
<li><p>Select the best of the subset</p></li>
<li><p>Repeat until the next generation’s population is full</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">23</span><span class="k">def</span> <span class="nf">tournament_selection</span><span class="p">(</span>
<span class="linenos">24</span>    <span class="n">population</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">population_fitness</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">selected_indices</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">25</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="linenos">26</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="sd">    Select the chromosome with the maximum/minimum fitness value of the chromosomes in the tournament. The chromosomes</span>
<span class="linenos">28</span><span class="sd">    in the tournament if its index is contained within the selected_indices list. By default, the function selects for</span>
<span class="linenos">29</span><span class="sd">    maximum fitness.</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="sd">    :param population: Population of chromosomes to select from</span>
<span class="linenos">32</span><span class="sd">    :param population_fitness: Fitness values of the population</span>
<span class="linenos">33</span><span class="sd">    :param selected_indices: List of indices in the tournament</span>
<span class="linenos">34</span><span class="sd">    :param direction: +1 for maximizing fitness, -1 for minimizing fitness</span>
<span class="linenos">35</span><span class="sd">    :return: A copy of the selected chromosome</span>
<span class="linenos">36</span><span class="sd">    :raises ValueError: If the list of selected indices is empty or contains an out-of-bounds index</span>
<span class="linenos">37</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">38</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">39</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;List of indices in the tournament must be non empty: </span><span class="si">{</span><span class="n">selected_indices</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">40</span>    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">selected_indices</span><span class="p">:</span>
<span class="linenos">41</span>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">42</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;List of indices in the tournament contains out-of-bounds index: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">43</span>    <span class="n">max_value</span> <span class="o">=</span> <span class="n">population_fitness</span><span class="p">[</span><span class="n">selected_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">direction</span>
<span class="linenos">44</span>    <span class="n">max_index</span> <span class="o">=</span> <span class="n">selected_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">45</span>    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">selected_indices</span><span class="p">:</span>
<span class="linenos">46</span>        <span class="k">if</span> <span class="n">population_fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">direction</span> <span class="o">&gt;</span> <span class="n">max_value</span><span class="p">:</span>
<span class="linenos">47</span>            <span class="n">max_value</span> <span class="o">=</span> <span class="n">population_fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">direction</span>
<span class="linenos">48</span>            <span class="n">max_index</span> <span class="o">=</span> <span class="n">index</span>
<span class="linenos">49</span>    <span class="k">return</span> <span class="n">population</span><span class="p">[</span><span class="n">max_index</span><span class="p">][:]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>This <code class="docutils literal notranslate"><span class="pre">tournament_selection</span></code> function returns a single chromosome</p></li>
<li><p>This function must be run multiple times until the next generation’s population is full</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">81</span>        <span class="n">mating_pool</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">82</span>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">):</span>
<span class="linenos">83</span>            <span class="n">tournament_indices</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">),</span> <span class="n">k</span><span class="o">=</span><span class="n">TOURNAMENT_SIZE</span><span class="p">)</span>
<span class="linenos">84</span>            <span class="n">chromosome</span> <span class="o">=</span> <span class="n">tournament_selection</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">population_fitness</span><span class="p">,</span> <span class="n">tournament_indices</span><span class="p">)</span>
<span class="linenos">85</span>            <span class="n">mating_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>In the above code, the list <code class="docutils literal notranslate"><span class="pre">mating_pool</span></code> will ultimately become the next generation’s population</p></li>
<li><p>The size of the tournament is defined by a hyperparameter called <code class="docutils literal notranslate"><span class="pre">TOURNAMENT_SIZE</span></code></p></li>
</ul>
</section>
<section id="variation-operators">
<h2><span class="section-number">2.5. </span>Variation Operators<a class="headerlink" href="#variation-operators" title="Link to this heading"></a></h2>
<ul>
<li><p>Variation operators, sometimes called genetic operators, are used to alter the chromosomes</p>
<blockquote>
<div><ul class="simple">
<li><p>With only selection, the chromosomes will never change</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Like most things with GAs, there are no real hard rules on how this is done</p></li>
<li><p>Typically there should be a way to exploit what is already known to be good</p></li>
<li><p>And there should be a way to add some new information to the chromosomes to better explore the search space</p></li>
</ul>
<section id="crossover">
<h3><span class="section-number">2.5.1. </span>Crossover<a class="headerlink" href="#crossover" title="Link to this heading"></a></h3>
<ul>
<li><p>Crossover is a variation operator that acts on two chromosomes</p></li>
<li><p>The idea is, if two candidate solutions are relatively good, then mixing them together may produce something good</p></li>
<li><p>Again, there is no one correct way to perform crossover</p></li>
<li><p>A simple crossover one could use is <code class="docutils literal notranslate"><span class="pre">one_point_crossover</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Given two chromosomes</p></li>
<li><p>Select an arbitrary index</p></li>
<li><p>Swap the contents of the chromosomes from that index to the end</p></li>
</ul>
</div></blockquote>
</li>
<li><p>For example, selecting index <code class="docutils literal notranslate"><span class="pre">2</span></code> for the following chromosomes</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>       v                    v
[0, 0, 0, 0, 0]      [0, 0, 1, 1, 1]
                 -&gt;
[1, 1, 1, 1, 1]      [1, 1, 0, 0, 0]
       ^                    ^
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">50</span><span class="k">def</span> <span class="nf">one_point_crossover</span><span class="p">(</span><span class="n">parent_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">parent_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="linenos">51</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">52</span><span class="sd">    One point crossover. All elements at and after the crossover index are swapped between the two chromosomes.</span>
<span class="linenos">53</span><span class="sd">    For example, with a crossover index of 2, [0,0,0,0,0], [1,1,1,1,1] -&gt; [0,0,1,1,1], [1,1,0,0,0]. A crossover index of</span>
<span class="linenos">54</span><span class="sd">    0 is allowed, but results in all contents being swapped.</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="sd">    :param parent_1: Chromosome to be used in crossover</span>
<span class="linenos">57</span><span class="sd">    :param parent_2: Chromosome to be used in crossover</span>
<span class="linenos">58</span><span class="sd">    :param index: The index of the starting point of where all elements will be swapped between chromosomes</span>
<span class="linenos">59</span><span class="sd">    :return: The two chromosomes after the crossover is applied</span>
<span class="linenos">60</span><span class="sd">    :raises ValueError: If the parents are not the same length of if the index is out-of-bounds</span>
<span class="linenos">61</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">62</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_2</span><span class="p">):</span>
<span class="linenos">63</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;chromosomes must be the same length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">parent_1</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">parent_2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">64</span>    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">65</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index out-of-bounds: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">66</span>    <span class="n">child_1</span> <span class="o">=</span> <span class="n">parent_1</span><span class="p">[:]</span>
<span class="linenos">67</span>    <span class="n">child_2</span> <span class="o">=</span> <span class="n">parent_2</span><span class="p">[:]</span>
<span class="linenos">68</span>    <span class="n">child_1</span><span class="p">[</span><span class="n">index</span><span class="p">:],</span> <span class="n">child_2</span><span class="p">[</span><span class="n">index</span><span class="p">:]</span> <span class="o">=</span> <span class="n">child_2</span><span class="p">[</span><span class="n">index</span><span class="p">:],</span> <span class="n">child_1</span><span class="p">[</span><span class="n">index</span><span class="p">:]</span>
<span class="linenos">69</span>    <span class="k">return</span> <span class="n">child_1</span><span class="p">,</span> <span class="n">child_2</span>
</pre></div>
</div>
<ul class="simple">
<li><p>This function only returns two chromosomes, so it must be run multiple times</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">89</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">POPULATION_SIZE</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<span class="hll"><span class="linenos">90</span>            <span class="k">if</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">CROSSOVER_RATE</span><span class="p">:</span>
</span><span class="linenos">91</span>                <span class="n">crossover_point</span> <span class="o">=</span> <span class="n">randrange</span><span class="p">(</span><span class="n">BIT_STRING_LENGTH</span><span class="p">)</span>
<span class="linenos">92</span>                <span class="n">chromosome_1</span><span class="p">,</span> <span class="n">chromosome_2</span> <span class="o">=</span> <span class="n">one_point_crossover</span><span class="p">(</span><span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">crossover_point</span><span class="p">)</span>
<span class="linenos">93</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome_1</span>
<span class="linenos">94</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome_2</span>
</pre></div>
</div>
<ul>
<li><p>Notice that the crossover is applied to adjacent candidate solutions within the <code class="docutils literal notranslate"><span class="pre">mating_pool</span></code> list</p>
<blockquote>
<div><ul class="simple">
<li><p>The fact that they are adjacent is arbitrary</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Also notice <code class="docutils literal notranslate"><span class="pre">random()</span> <span class="pre">&lt;</span> <span class="pre">CROSSOVER_RATE</span></code></p></li>
<li><p>Crossover is typically not always applied</p></li>
<li><p>Thus, this provides a way for selected candidate solutions to persist in the next generation unchanged</p></li>
<li><p>The probability of crossover being applied is defined by a hyperparameter called <code class="docutils literal notranslate"><span class="pre">CROSSOVER_RATE</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Value would be <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">CROSSOVER_RATE</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="potential-problem">
<h4><span class="section-number">2.5.1.1. </span>Potential Problem<a class="headerlink" href="#potential-problem" title="Link to this heading"></a></h4>
<ul>
<li><p>There is a potential problem with this crossover on this problem</p></li>
<li><p>Consider the following population on a smaller version of the problem where <span class="math notranslate nohighlight">\(n=5\)</span></p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[1, 0, 1, 1, 1],
 [1, 0, 0, 0, 1],
 [0, 0, 1, 1, 1],
 [1, 0, 1, 1, 1],
 [0, 0, 0, 1, 0]]
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Notice how there exists no <code class="docutils literal notranslate"><span class="pre">1</span></code> in any of the chromosomes’ index <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>Because of this, it is actually not possible to ever find the optimal solution through crossover</p></li>
<li><p>This is because there is no way to add new information to the candidate solutions</p></li>
<li><p>It is only possible to transfer the existing information between the candidate solutions</p></li>
</ul>
</section>
</section>
<section id="mutation">
<h3><span class="section-number">2.5.2. </span>Mutation<a class="headerlink" href="#mutation" title="Link to this heading"></a></h3>
<ul>
<li><p>Mutation is a variation operator that acts on a single chromosome</p></li>
<li><p>It is also great for adding new information to the candidate solutions</p></li>
<li><p>Like crossover, there is no correct way to perform mutation</p></li>
<li><p>Here, a <code class="docutils literal notranslate"><span class="pre">bit_flip_mutation</span></code> will be used</p>
<blockquote>
<div><ul class="simple">
<li><p>Given a chromosome</p></li>
<li><p>Select an arbitrary index</p></li>
<li><p>Flip the bit at the selected index (<code class="docutils literal notranslate"><span class="pre">0</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">1</span></code>/<code class="docutils literal notranslate"><span class="pre">1</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>For example, selecting index 2 for the following chromosome</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[0, 0, 0, 0, 0]  -&gt;  [0, 0, 1, 0, 0]
       ^                    ^
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">bit_flip_mutation</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 3</span><span class="sd">    Bit flip mutation. Flip the bit at the specified index. In other words, if the bit is a 0, change it to be a 1, and</span>
<span class="linenos"> 4</span><span class="sd">    if the bit is a 1, change it to be a 0. For example, with mutation index of 2, [0,0,0,0,0] -&gt; [0,0,1,0,0].</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="sd">    :param parent: Chromosome to be mutated</span>
<span class="linenos"> 7</span><span class="sd">    :param index: Index of the bit to be flipped</span>
<span class="linenos"> 8</span><span class="sd">    :return: The chromosome after the mutation is applied</span>
<span class="linenos"> 9</span><span class="sd">    :raises ValueError: If the index is out-of-bounds</span>
<span class="linenos">10</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">11</span>    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">12</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index out-of-bounds: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">13</span>    <span class="n">child</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[:]</span>
<span class="linenos">14</span>    <span class="n">child</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">child</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
<span class="linenos">15</span>    <span class="k">return</span> <span class="n">child</span>
</pre></div>
</div>
<ul>
<li><p>Similar to crossover, the application of mutation is probabilistic based on a hyperparameter called <code class="docutils literal notranslate"><span class="pre">MUTATION_RATE</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>Where <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">MUTATION_RATE</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 98</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">):</span>
<span class="hll"><span class="linenos"> 99</span>            <span class="k">if</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">MUTATION_RATE</span><span class="p">:</span>
</span><span class="linenos">100</span>                <span class="n">mutation_point</span> <span class="o">=</span> <span class="n">randrange</span><span class="p">(</span><span class="n">BIT_STRING_LENGTH</span><span class="p">)</span>
<span class="linenos">101</span>                <span class="n">chromosome</span> <span class="o">=</span> <span class="n">bit_flip_mutation</span><span class="p">(</span><span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mutation_point</span><span class="p">)</span>
<span class="linenos">102</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome</span>
</pre></div>
</div>
</section>
</section>
<section id="termination-requirement">
<h2><span class="section-number">2.6. </span>Termination Requirement<a class="headerlink" href="#termination-requirement" title="Link to this heading"></a></h2>
<ul>
<li><p>The above describes a single generation of the GA</p></li>
<li><p>For this algorithm to work, many generations will need to be executed</p></li>
<li><p>This then begs the question, <em>when does one stop the algorithm</em></p>
<blockquote>
<div><ul class="simple">
<li><p>After some set number of generations?</p></li>
<li><p>After the optimal solution is found?</p></li>
<li><p>After there have been no improvements in the population?</p></li>
<li><p>…</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Again, like most things with GAs, there really is no correct answer</p></li>
<li><p>Here, for ease, the algorithm is run for some number of generations specified by the hyperparameter <code class="docutils literal notranslate"><span class="pre">GENERATIONS</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 68</span>    <span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GENERATIONS</span><span class="p">):</span>
<span class="linenos"> 69</span>        <span class="c1"># [begin-evaluation]</span>
<span class="linenos"> 70</span>        <span class="n">population_fitness</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 71</span>        <span class="k">for</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
<span class="linenos"> 72</span>            <span class="n">fitness</span> <span class="o">=</span> <span class="n">value_fitness</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
<span class="linenos"> 73</span>            <span class="n">population_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
<span class="linenos"> 74</span>        <span class="c1"># [end-evaluation]</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>        <span class="c1"># Bookkeeping</span>
<span class="linenos"> 77</span>        <span class="n">generation_max_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">))</span>
<span class="linenos"> 78</span>        <span class="n">generation_average_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">)</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">))</span>
<span class="linenos"> 79</span>
<span class="linenos"> 80</span>        <span class="c1"># [begin-selection]</span>
<span class="linenos"> 81</span>        <span class="n">mating_pool</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 82</span>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">):</span>
<span class="linenos"> 83</span>            <span class="n">tournament_indices</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">),</span> <span class="n">k</span><span class="o">=</span><span class="n">TOURNAMENT_SIZE</span><span class="p">)</span>
<span class="linenos"> 84</span>            <span class="n">chromosome</span> <span class="o">=</span> <span class="n">tournament_selection</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">population_fitness</span><span class="p">,</span> <span class="n">tournament_indices</span><span class="p">)</span>
<span class="linenos"> 85</span>            <span class="n">mating_pool</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
<span class="linenos"> 86</span>        <span class="c1"># [end-selection]</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span>        <span class="c1"># [begin-crossover]</span>
<span class="linenos"> 89</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">POPULATION_SIZE</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<span class="linenos"> 90</span>            <span class="k">if</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">CROSSOVER_RATE</span><span class="p">:</span>
<span class="linenos"> 91</span>                <span class="n">crossover_point</span> <span class="o">=</span> <span class="n">randrange</span><span class="p">(</span><span class="n">BIT_STRING_LENGTH</span><span class="p">)</span>
<span class="linenos"> 92</span>                <span class="n">chromosome_1</span><span class="p">,</span> <span class="n">chromosome_2</span> <span class="o">=</span> <span class="n">one_point_crossover</span><span class="p">(</span><span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">crossover_point</span><span class="p">)</span>
<span class="linenos"> 93</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome_1</span>
<span class="linenos"> 94</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome_2</span>
<span class="linenos"> 95</span>        <span class="c1"># [end-crossover]</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>        <span class="c1"># [begin-mutation]</span>
<span class="linenos"> 98</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">POPULATION_SIZE</span><span class="p">):</span>
<span class="linenos"> 99</span>            <span class="k">if</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">MUTATION_RATE</span><span class="p">:</span>
<span class="linenos">100</span>                <span class="n">mutation_point</span> <span class="o">=</span> <span class="n">randrange</span><span class="p">(</span><span class="n">BIT_STRING_LENGTH</span><span class="p">)</span>
<span class="linenos">101</span>                <span class="n">chromosome</span> <span class="o">=</span> <span class="n">bit_flip_mutation</span><span class="p">(</span><span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mutation_point</span><span class="p">)</span>
<span class="linenos">102</span>                <span class="n">mating_pool</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">chromosome</span>
<span class="linenos">103</span>        <span class="c1"># [end-mutation]</span>
<span class="linenos">104</span>
<span class="linenos">105</span>        <span class="n">population</span> <span class="o">=</span> <span class="n">mating_pool</span>
</pre></div>
</div>
<ul>
<li><p>Notice that this generation loop performs</p>
<blockquote>
<div><ul class="simple">
<li><p>Evaluation</p></li>
<li><p>Selection</p></li>
<li><p>Variation Operators</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Also notice the bookkeeping variables storing some values from evolution</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">generation_max_fitness</span></code> and <code class="docutils literal notranslate"><span class="pre">generation_average_fitness</span></code></p></li>
<li><p>These are not required, but help with visualizing what happened</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Also notice the tags like <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">[begin-evaluation]</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>These can be ignored</p></li>
<li><p>They are only there for making it easier to reference the code in the course notes</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Once the loop terminates, the population should be evaluated one last time to find the best candidate solution</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">109</span>    <span class="n">population_fitness</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">110</span>    <span class="k">for</span> <span class="n">chromosome</span> <span class="ow">in</span> <span class="n">population</span><span class="p">:</span>
<span class="linenos">111</span>        <span class="n">fitness</span> <span class="o">=</span> <span class="n">value_fitness</span><span class="p">(</span><span class="n">chromosome</span><span class="p">)</span>
<span class="linenos">112</span>        <span class="n">population_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
<span class="linenos">113</span>    <span class="nb">print</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">)</span>
<span class="linenos">114</span>    <span class="nb">print</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
<span class="linenos">115</span>    <span class="n">generation_max_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">))</span>
<span class="linenos">116</span>    <span class="n">generation_average_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">)</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="n">population_fitness</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="for-next-class">
<h2><span class="section-number">2.7. </span>For Next Class<a class="headerlink" href="#for-next-class" title="Link to this heading"></a></h2>
<ul>
<li><p>Check out the following scripts</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../_downloads/e1a90c967cc1c705d4e5537d0f4da751/selection.py"><code class="xref download docutils literal notranslate"><span class="pre">The</span> <span class="pre">Selection</span> <span class="pre">Script</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/969dd0fa769f120fd7b02939736b2fc2/crossover.py"><code class="xref download docutils literal notranslate"><span class="pre">The</span> <span class="pre">Crossover</span> <span class="pre">Script</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/3ff90bc7da7f0b62d9faef93bebb4fc4/mutation.py"><code class="xref download docutils literal notranslate"><span class="pre">The</span> <span class="pre">Mutation</span> <span class="pre">Script</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../_downloads/8a2c67e2ae00387c225f4b694ebdbec4/ga_max_bitstring.py"><code class="xref download docutils literal notranslate"><span class="pre">Bitstring</span> <span class="pre">GA</span></code></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../intro/intro.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="simple-ga-experiment.html" class="btn btn-neutral float-right" title="3. Experimenting with a Genetic Algorithm" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, James Hughes &amp; Taras Mychaskiw.
      <span class="lastupdated">Last updated on Nov 17, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>